---
/**
 * ComparisonTable Component
 * 
 * A reusable, responsive comparison table component for product specifications.
 * Follows InSpotGO design system with blue/orange color scheme.
 * 
 * @component
 * @example
 * ```astro
 * import ComparisonTable from '@/components/ComparisonTable.astro';
 * 
 * const products = [
 *   {
 *     name: 'Product Name',
 *     badge: 'üèÜ Editor\'s Pick',
 *     badgeType: 'editor',
 *     display: { main: '6.6" AMOLED', sub: '120Hz' },
 *     processor: { main: 'Snapdragon 7', sub: 'Gen 2' },
 *     battery: { main: '5,000 mAh', sub: '67W Fast Charging' },
 *     camera: { main: '64MP', sub: 'with OIS' },
 *     tier: 'mid',
 *     highlight: true
 *   }
 * ];
 * 
 * <ComparisonTable title="Smartphone Comparison" products={products} />
 * ```
 */

interface SpecDetail {
  main: string;
  sub?: string;
}

interface Product {
  name: string;
  badge?: string;
  badgeType?: 'editor' | 'value' | 'popular';
  display: SpecDetail;
  processor: SpecDetail;
  battery: SpecDetail;
  camera: SpecDetail;
  tier: 'entry' | 'mid' | 'premium';
  highlight?: boolean;
}

interface Props {
  title?: string;
  products: Product[];
  note?: string;
}

const { 
  title = "Specifications Comparison", 
  products,
  note = "All specifications are based on manufacturer information. Prices and availability may vary."
} = Astro.props;

const tierLabels = {
  entry: 'Entry-level',
  mid: 'Mid-range',
  premium: 'Premium'
};
---

<div class="comparison-table-wrapper">
  {title && <h2 class="table-title">{title}</h2>}
  
  <div class="table-container">
    <table class="comparison-table">
      <thead>
        <tr>
          <th class="col-model">Model</th>
          <th class="col-display">üì± Display</th>
          <th class="col-processor">‚ö° Processor</th>
          <th class="col-battery">üîã Battery</th>
          <th class="col-camera">üì∏ Camera</th>
          <th class="col-tier">üè∑Ô∏è Tier</th>
        </tr>
      </thead>
      <tbody>
        {products.map((product) => (
          <tr class:list={[{ 'row-highlight': product.highlight }]}>
            <td class="model-cell">
              <div class="model-name">{product.name}</div>
              {product.badge && (
                <span class:list={['badge', `badge-${product.badgeType || 'editor'}`]}>
                  {product.badge}
                </span>
              )}
            </td>
            <td>
              <div class="spec-group">
                <div class="spec-main">{product.display.main}</div>
                {product.display.sub && <div class="spec-sub">{product.display.sub}</div>}
              </div>
            </td>
            <td>
              <div class="spec-group">
                <div class="spec-main">{product.processor.main}</div>
                {product.processor.sub && <div class="spec-sub">{product.processor.sub}</div>}
              </div>
            </td>
            <td>
              <div class="spec-group">
                <div class="spec-main">{product.battery.main}</div>
                {product.battery.sub && <div class="spec-sub">{product.battery.sub}</div>}
              </div>
            </td>
            <td>
              <div class="spec-group">
                <div class="spec-main">{product.camera.main}</div>
                {product.camera.sub && <div class="spec-sub">{product.camera.sub}</div>}
              </div>
            </td>
            <td>
              <span class:list={['tier-badge', `tier-${product.tier}`]}>
                {tierLabels[product.tier]}
              </span>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>

  {note && (
    <div class="table-note">
      <p>üí° <strong>Note:</strong> {note}</p>
    </div>
  )}
</div>

<style>
  .comparison-table-wrapper {
    margin: 2.5rem 0;
  }

  .table-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--color-text, #1f2937);
    margin-bottom: 1.5rem;
    text-align: left;
  }

  .table-container {
    overflow-x: auto;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
                0 2px 4px -1px rgba(0, 0, 0, 0.06);
    background: white;
  }

  .comparison-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95rem;
    min-width: 900px;
  }

  /* Header Styles */
  .comparison-table thead {
    background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
    color: white;
    position: sticky;
    top: 0;
    z-index: 10;
  }

  .comparison-table th {
    padding: 1.125rem 1rem;
    text-align: left;
    font-weight: 600;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    white-space: nowrap;
  }

  /* Body Styles */
  .comparison-table tbody tr {
    border-bottom: 1px solid #e5e7eb;
    transition: all 0.2s ease;
  }

  .comparison-table tbody tr:hover {
    background-color: #f0f9ff;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.08);
  }

  .comparison-table tbody tr:last-child {
    border-bottom: none;
  }

  /* Highlight Row (Editor's Pick, Featured) */
  .row-highlight {
    background: linear-gradient(to right, #fff7ed 0%, #ffffff 100%);
    border-left: 4px solid #f97316;
  }

  .row-highlight:hover {
    background: linear-gradient(to right, #ffedd5 0%, #fef3c7 100%);
  }

  .comparison-table td {
    padding: 1.125rem 1rem;
    vertical-align: top;
  }

  /* Model Cell */
  .model-cell {
    font-weight: 600;
    color: var(--color-primary, #2563eb);
    min-width: 180px;
  }

  .model-name {
    font-size: 1.05rem;
    margin-bottom: 0.5rem;
    line-height: 1.4;
    display: block;
  }

  /* Spec Group */
  .spec-group {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .spec-main {
    font-weight: 600;
    color: var(--color-text, #1f2937);
    font-size: 0.95rem;
  }

  .spec-sub {
    font-size: 0.85rem;
    color: var(--color-text-light, #6b7280);
    line-height: 1.3;
  }

  /* Badges */
  .badge {
    display: inline-block;
    padding: 0.375rem 0.875rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.025em;
    white-space: nowrap;
  }

  .badge-editor {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
  }

  .badge-value {
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
  }

  .badge-popular {
    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
  }

  /* Tier Badges */
  .tier-badge {
    display: inline-block;
    padding: 0.625rem 1rem;
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 700;
    text-align: center;
    white-space: nowrap;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .tier-mid {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #1e40af;
    border: 2px solid #3b82f6;
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.15);
  }

  .tier-entry {
    background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
    color: #374151;
    border: 2px solid #9ca3af;
    box-shadow: 0 2px 8px rgba(107, 114, 128, 0.15);
  }

  .tier-premium {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    border: 2px solid #f59e0b;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.2);
  }

  /* Table Note */
  .table-note {
    margin-top: 1.5rem;
    padding: 1.125rem 1.25rem;
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    border-left: 4px solid #2563eb;
    border-radius: 8px;
  }

  .table-note p {
    margin: 0;
    font-size: 0.9rem;
    color: #1e40af;
    line-height: 1.6;
  }

  /* Column Widths */
  .col-model { width: 20%; }
  .col-display { width: 16%; }
  .col-processor { width: 14%; }
  .col-battery { width: 16%; }
  .col-camera { width: 14%; }
  .col-tier { width: 12%; }

  /* Responsive Design */
  @media (max-width: 768px) {
    .table-container {
      border-radius: 8px;
    }

    .comparison-table {
      font-size: 0.875rem;
      min-width: 800px;
    }

    .comparison-table th,
    .comparison-table td {
      padding: 0.875rem 0.75rem;
    }

    .table-title {
      font-size: 1.5rem;
    }

    .model-name {
      font-size: 1rem;
    }

    .spec-main {
      font-size: 0.875rem;
    }

    .spec-sub {
      font-size: 0.8rem;
    }
  }

  @media (max-width: 480px) {
    .comparison-table-wrapper {
      margin: 1.5rem -1rem;
    }

    .table-title {
      padding: 0 1rem;
    }

    .table-note {
      margin: 1rem 1rem 0;
    }
  }
</style>
